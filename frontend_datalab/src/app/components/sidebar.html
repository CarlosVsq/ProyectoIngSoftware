<aside
  class="fixed top-0 left-0 h-screen w-64 bg-white shadow-md flex flex-col justify-between border-r border-gray-200 z-40 transform transition-transform duration-200"
  [class.-translate-x-full]="!open" aria-label="Barra lateral de navegación">

  <!-- Botón cerrar/plegar (visible en escritorio) -->
  <button type="button" aria-label="Ocultar menú lateral"
    class="hidden lg:flex items-center justify-center absolute -right-3 top-4 w-7 h-7 rounded-full border bg-white shadow hover:bg-gray-50"
    (click)="close()">
    <span class="material-icons text-[20px]">chevron_left</span>
  </button>
  <!-- LOGO -->
  <div>
    <div class="flex items-center gap-2 px-6 py-4 border-b border-gray-100">
      <img src="/imagenes/logo-sin-letra.png" alt="DATALAB" class="h-8 w-8" />
      <div>
        <h1 class="font-bold text-primary text-lg">DATALAB</h1>
        <p class="text-xs text-gray-500">Investigación Biomédica</p>
      </div>
    </div>

    <!-- NAVEGACIÓN -->
    <nav class="mt-4 flex flex-col">
      <a routerLink="/dashboard" routerLinkActive="bg-blue-50 text-primary font-semibold"
        class="flex items-center gap-3 px-6 py-3 text-gray-600 hover:bg-blue-50 hover:text-primary transition">
        <span class="material-icons text-[20px]">home</span>
        <span *ngIf="open">Inicio</span>
      </a>
      <!-- Listado de Participantes -->
      <a routerLink="/lista-participantes" routerLinkActive="bg-blue-50 text-blue-700"
        [class.pointer-events-none]="!auth.canViewData()" [class.opacity-50]="!auth.canViewData()"
        class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors group">
        <span class="material-icons text-xl group-hover:text-blue-600 transition-colors">people</span>
        <span *ngIf="open" class="font-medium text-sm">Listado Participantes</span>
      </a>

      <!-- Progreso (Modificar) -->
      <a routerLink="/reclutamiento" routerLinkActive="bg-blue-50 text-blue-700"
        [class.pointer-events-none]="!auth.canModify()" [class.opacity-50]="!auth.canModify()"
        class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors group">
        <span class="material-icons text-xl group-hover:text-blue-600 transition-colors">show_chart</span>
        <span *ngIf="open" class="font-medium text-sm">Progreso Reclutamiento</span>
      </a>

      <!-- Exportaciones -->
      <a routerLink="/exportaciones" routerLinkActive="bg-blue-50 text-blue-700"
        [class.pointer-events-none]="!auth.canExport()" [class.opacity-50]="!auth.canExport()"
        class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors group">
        <span class="material-icons text-xl group-hover:text-blue-600 transition-colors">file_download</span>
        <span *ngIf="open" class="font-medium text-sm">Exportaciones</span>
      </a>

      <!-- Auditoría -->
      <a routerLink="/auditoria" routerLinkActive="bg-blue-50 text-blue-700"
        [class.pointer-events-none]="!auth.canAdmin()" [class.opacity-50]="!auth.canAdmin()"
        class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors group">
        <span class="material-icons text-xl group-hover:text-blue-600 transition-colors">manage_history</span>
        <span *ngIf="open" class="font-medium text-sm">Auditoría</span>
      </a>

      <!-- Configuración -->
      <a routerLink="/configuracion" routerLinkActive="bg-blue-50 text-blue-700"
        [class.pointer-events-none]="!auth.canAdmin()" [class.opacity-50]="!auth.canAdmin()"
        class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors group">
        <span class="material-icons text-xl group-hover:text-blue-600 transition-colors">settings</span>
        <span *ngIf="open" class="font-medium text-sm">Configuración</span>
      </a>
    </nav>
  </div>

  <!-- FOOTER / USER INFO -->
  <footer class="px-6 py-4 text-xs text-gray-400 border-t border-gray-100 space-y-3">
    <div class="flex items-center gap-3">
      <div class="h-10 w-10 rounded-full bg-primary/10 text-primary flex items-center justify-center font-semibold">
        {{ usuarioIniciales }}
      </div>
      <div class="flex-1 min-w-0">
        <p class="text-sm font-semibold text-gray-800 truncate">{{ usuarioNombre }}</p>
        <p class="text-[11px] text-gray-500 truncate">{{ usuarioRol }}</p>
      </div>
    </div>
    <div>v1.0.0 © 2025 DATALAB</div>
  </footer>
</aside>

<div *ngIf="open" class="fixed inset-0 bg-black/30 z-30 lg:hidden" (click)="close()"></div>